<view>
  <background isHighlight="true"></background>
  <view class="report-profile">
    <view class="rp-record">
      <view class="rpr-top">
        <view class="rpr-top-left">本月{{reportList[0].dateType}}</view>
        <view class="rpr-top-right" bindtap="onSeasonPicker">
          <view>其他月份</view>
          <image
            class="rpr-top-img"
            src="https://prod-2gdukdnr11f1f68a-1320540808.tcloudbaseapp.com/image/right_icon.png?sign=ada09695e56c3586b37e808eac1157e7&t=1694003113"
          ></image>
        </view>
        <t-picker
          visible="{{dateVisible}}"
          value="{{dateValue}}"
          data-key="date"
          title="选择时间"
          cancelBtn="取消"
          confirmBtn="确认"
          bindchange="onPickerChange"
          bindpick="onColumnChange"
          bindcancel="onPickerCancel"
        >
          <t-picker-item options="{{years}}"></t-picker-item>
          <t-picker-item options="{{seasons}}"></t-picker-item>
        </t-picker>
      </view>
      <view class="rpr-content">
        <t-progress color="#FF3E3E" stroke-width="20" theme="circle" percentage="{{percentage}}" />
        <view class="rpr-record">
          <view class="rpr-record-item">
            <view>合格项</view>
            <view class="text-blue">14</view>
          </view>
          <view class="rpr-record-item">
            <view>不合格项</view>
            <view class="text-red">5</view>
          </view>
          <view class="rpr-record-item">
            <view>不合格天数</view>
            <view class="text-red">2</view>
          </view>
        </view>
      </view>
    </view>
    <view class="rp-list">
      <view class="rp-item" wx:for="{{reportList}}" wx:key="index" wx:for-item="reportItem" bindtap="goDailyStats">
        <view class="rp-item-left">
          <view class="rpil-date">{{ reportItem.date }}</view>
          <view class="rpil-type">{{ reportItem.dateType }}</view>
        </view>
        <view class="{{ reportItem.unqualifiedTotal ? 'rp-item-right-red' : 'rp-item-right'}}">
          <view class="rpir-top">
            <view>共{{ reportItem.total }}项</view>
            <view wx:if="{{reportItem.unqualifiedTotal > 0}}">{{ reportItem.unqualifiedTotal }}项不合格</view>
            <view wx:else>全部合格</view>
          </view>
          <view class="rpir-center">
            {{ reportItem.submitTime }} | {{ reportItem.submitUser }} | {{ reportItem.submitType }}</view
          >
          <view class="rpir-bottom"> {{ reportItem.address }}</view>
        </view>
      </view>
    </view>
  </view>

  <t-toast id="t-toast" />
</view>
